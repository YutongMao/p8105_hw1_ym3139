---
title: "P8105 HW1"
author: 'Yutong Mao (UNI: ym3139)'
date: "2025-09-20"
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```
# Problem 1
```{r p1-setup, message=FALSE, warning=FALSE}
library(moderndive)
library(ggplot2)

data("early_january_weather")  
wx <- early_january_weather

```
The dataset `early_january_weather` has `r nrow(wx)` rows and `r ncol(wx)` columns.  
Important variables include: `r paste(names(wx), collapse = ", ")`.  
The average temperature is `r round(mean(wx$temp, na.rm = TRUE), 2)` °F.

```{r}
p_temp_time <- ggplot(wx, aes(x = time_hour, y = temp, color = humid)) +
  geom_point(alpha = 0.55, size = 1.1) +
  labs(
    x = "Time (hourly)",
    y = "Temperature (°F)",
    color = "Humidity",
    title = "Hourly temperature in early January (colored by humidity)"
  ) +
  theme_minimal()

p_temp_time

```

The figure shows: Temperature fluctuates significantly throughout the day (higher during the day, lower at night); and the color indicates a trend of inverse correlation between humidity and temperature (periods of lower temperature are often accompanied by higher humidity).

```{r}
ggplot2::ggsave(
  filename = "fig_temp_vs_time.png",
  plot = p_temp_time,
  width = 7, height = 4, dpi = 300
)
```


# Problem 2
```{r p2-data, message=FALSE, warning=FALSE}
library(tidyverse)
set.seed(8105)

df_p2 <- tibble(
  norm_samp   = rnorm(10),                     # numeric
  is_positive = norm_samp > 0,                 # logical
  char_vec    = paste0("id_", 1:10),           # character
  factor_vec  = factor(                        # factor (3 levels)
    rep(c("low","med","high"), length.out = 10),
    levels = c("low","med","high")
  )
)

df_p2

```

```{r}
mean_num   <- df_p2 %>% pull(norm_samp)   %>% mean()
mean_logi  <- df_p2 %>% pull(is_positive) %>% mean()

tibble(
  variable = c("norm_samp (numeric)", "is_positive (logical)"),
  mean     = c(mean_num,               mean_logi)
)

```

```{r}
# These fail because the columns are not numeric/logical:
df_p2 %>% pull(char_vec)   %>% mean()
df_p2 %>% pull(factor_vec) %>% mean()
```


```{r}
# Coercion demos (code only; output hidden)
as.numeric(df_p2$is_positive)     
as.numeric(df_p2$char_vec) 
as.numeric(df_p2$factor_vec) 

```

For numeric columns, the `mean()` function operates as expected.  

For logical columns, `mean()` is also valid because `TRUE` is coerced to 1 and `FALSE` is coerced to 0, so the mean equals the proportion of `TRUE` values.  

For character and factor columns, `mean()` cannot be applied because they are neither numeric nor logical.  

Use `as.numeric()` to convert:
- Logical → 0/1 (thus `mean()` calculates as a proportion),
- Character → `NA` (non-numeric strings cannot be coerced),
- Factor → the internal integer encoding of the levels (1, 2, 3), **not** the label values.  

This explains why logical can compute the mean while character/factor cannot.

